<app-page-layout
  title="Notifications"
  description="View and manage system notifications. Create notifications and mark them as read."
  icon="üîî"
  [actions]="pageActions()">
  
  <!-- Notifications List -->
  <div class="space-y-3">
    <app-glass-card
      *ngFor="let notification of notifications()"
      [customClass]="'border-l-4 ' + getColor(notification.type) + (notification.isRead ? ' opacity-60' : '')"
    >
      <div class="flex items-start space-x-4">
        <span class="text-2xl">{{ getIcon(notification.type) }}</span>
        <div class="flex-1">
          <div class="flex items-start justify-between">
            <div>
              <h3 class="font-medium text-gray-900 dark:text-gray-100">
                {{ notification.title }}
              </h3>
              <div class="text-sm text-gray-600 dark:text-gray-400 mt-1"
                   [innerHTML]="notification.message">
              </div>
              <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">
                {{ formatTimestamp(notification.createdAt) }}
              </p>
            </div>
            <app-glass-button
              *ngIf="!notification.isRead"
              size="sm"
              (clicked)="markAsRead(notification)"
            >
              Mark as Read
            </app-glass-button>
          </div>
        </div>
      </div>
    </app-glass-card>

    <div *ngIf="notifications().length === 0" class="text-center py-16">
      <div class="text-6xl mb-4">üîî</div>
      <h3 class="text-xl font-medium text-gray-700 dark:text-gray-300 mb-2">
        No Notifications
      </h3>
      <p class="text-gray-500 dark:text-gray-400">
        You're all caught up!
      </p>
    </div>
  </div>

  <!-- Create Notification Modal -->
  <app-modal
    [isOpen]="showCreateModal()"
    title="Create Notification"
    [loading]="creating()"
    (closed)="closeCreateModal()"
    (confirmed)="createNotification()"
  >
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">
          Type
        </label>
        <select
          [(ngModel)]="newNotification.department"
          class="glass-input w-full"
        >
          <option value="info">‚ÑπÔ∏è Info</option>
          <option value="success">‚úÖ Success</option>
          <option value="warning">‚ö†Ô∏è Warning</option>
          <option value="error">‚ùå Error</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">
          Title <span class="text-red-500">*</span>
        </label>
        <input
          [(ngModel)]="newNotification.name"
          type="text"
          class="glass-input w-full"
          placeholder="Notification title"
        />
      </div>

      <div>
        <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">
          Message
        </label>
        <app-rich-text
          [(ngModel)]="newNotification.email"
          [placeholder]="'Notification message...'"
          [height]="'150px'"
          [showEditorSelector]="false"
          [showCharCount]="true"
          [maxLength]="1000"
          [editorType]="'ngx-editor'"
          [customClass]="'gemini-rich-text'">
        </app-rich-text>
      </div>
    </div>
  </app-modal>
</app-page-layout>

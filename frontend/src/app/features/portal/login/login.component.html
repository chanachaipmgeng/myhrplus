<div class="login-container min-h-screen flex items-center justify-center p-4 relative">
  <!-- Background Graphics -->
  <div class="login-bg-graphics">
    <div class="bg-gradient-overlay"></div>
    <div class="bg-grid-pattern"></div>
  </div>

  <!-- Header with Back to Landing Button -->
  <div class="login-header fixed top-0 left-0 right-0 z-50 glass-card border-b border-white/10 p-4">
    <div class="container mx-auto flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <button
          (click)="navigateToLanding()"
          class="back-to-home glass-card px-3 py-2 flex items-center space-x-2 hover:scale-105 transition-transform"
          [title]="i18n.t('login.backToHome')"
          [attr.aria-label]="i18n.t('login.backToHome')">
          <span class="text-lg">‚Üê</span>
          <span class="hidden md:inline font-medium">{{ i18n.t('login.home') }}</span>
        </button>
        <div class="text-3xl">üé•</div>
        <h1 class="text-xl font-bold gradient-text">IVAP Platform</h1>
      </div>
    </div>
  </div>

  <app-glass-card customClass="max-w-md w-full relative z-10 mt-20">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold bg-gradient-to-r from-primary-500 to-purple-600 bg-clip-text text-transparent mb-2">
        {{ i18n.t('login.title') }}
      </h1>
      <p class="text-gray-600 dark:text-gray-400">
        {{ i18n.t('login.subtitle') }}
      </p>
    </div>

    <!-- Login Form -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- Username -->
      <div>
        <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">
          {{ i18n.t('login.username') }} <span class="text-red-500">*</span>
        </label>
        <input
          formControlName="username"
          type="text"
          class="glass-input w-full"
          [placeholder]="i18n.t('login.enterUsername')"
          [class.border-red-500]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched"
          [attr.aria-label]="i18n.t('login.username')"
          [attr.aria-required]="true"
          [attr.aria-invalid]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched"
        />
        <p *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched"
           class="text-red-500 text-sm mt-1">
          {{ i18n.t('login.usernameRequired') }}
        </p>
      </div>

      <!-- Password -->
      <div>
        <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">
          {{ i18n.t('login.password') }} <span class="text-red-500">*</span>
        </label>
        <input
          formControlName="password"
          type="password"
          class="glass-input w-full"
          [placeholder]="i18n.t('login.enterPassword')"
          [class.border-red-500]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
          [attr.aria-label]="i18n.t('login.password')"
          [attr.aria-required]="true"
          [attr.aria-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
        />
        <p *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
           class="text-red-500 text-sm mt-1">
          {{ i18n.t('login.passwordRequired') }}
        </p>
      </div>

      <!-- Error Message -->
      <div *ngIf="errorMessage()" class="glass bg-red-500/20 border border-red-500 p-4 rounded-lg" role="alert" [attr.aria-live]="'polite'">
        <p class="text-red-700 dark:text-red-400 text-sm">
          ‚úó {{ errorMessage() }}
        </p>
      </div>

      <!-- Submit Button -->
      <app-glass-button
        type="submit"
        variant="primary"
        [fullWidth]="true"
        [loading]="loading()"
        [disabled]="loginForm.invalid || loading()"
        [attr.aria-label]="t('common.login')"
        [attr.aria-busy]="loading()"
      >
        {{ t('common.login') }}
      </app-glass-button>
    </form>

    <!-- Register Button -->
    <div class="mt-6">
      <app-glass-button
        (clicked)="navigateToRegister()"
        variant="secondary"
        [fullWidth]="true"
        [attr.aria-label]="i18n.t('login.createAccount')"
      >
        {{ i18n.t('login.createAccount') }}
      </app-glass-button>
    </div>

    <!-- Forgot Password Link -->
    <div class="text-center mt-6">
      <a routerLink="/portal/forgot-password" class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary-500">
        {{ i18n.t('login.forgotPassword') }}
      </a>
    </div>

    <!-- Language & Theme Toggle -->
    <div class="mt-8 flex justify-center space-x-4">
      <button
        (click)="toggleLanguage()"
        class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary-500"
        [attr.aria-label]="currentLang() === 'th' ? i18n.t('login.switchToEnglish') : i18n.t('login.switchToThai')"
      >
        {{ currentLang() === 'th' ? i18n.t('login.switchToEnglish') : i18n.t('login.switchToThai') }}
      </button>
      <span class="text-gray-400" aria-hidden="true">|</span>
      <button
        (click)="toggleTheme()"
        class="text-sm text-gray-600 dark:text-gray-400 hover:text-primary-500"
        [attr.aria-label]="getThemeIcon()"
      >
        {{ getThemeIcon() }}
      </button>
    </div>
  </app-glass-card>
</div>


<app-page-layout
  title="Alert Management"
  description="Manage and monitor system alerts. Acknowledge and resolve alerts from the system."
  icon="⚠️"
  [actions]="pageActions()">
  
  <!-- Statistics Cards -->
  <app-statistics-grid [stats]="statisticsCards()" [columns]="4" />

  <!-- Error Message -->
  @if (errorMessage()) {
    <div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg">
      <p class="text-red-800 dark:text-red-200 text-sm">{{ errorMessage() }}</p>
    </div>
  }

  <!-- Filters -->
  <app-filter-section
    [fields]="filterFields()"
    [columns]="4"
    (filterChange)="onFilterChange($event)"
  />

  <!-- Alerts List -->
  <app-glass-card customClass="p-6">
    @if (isLoading()) {
      <div class="text-center py-12">
        <app-loading [message]="'Loading alerts...'"></app-loading>
      </div>
    } @else {
      <div class="space-y-4">
        @for (alert of filteredAlerts(); track alert.id) {
          <div class="glass rounded-lg p-4 border border-gray-200 dark:border-gray-700 hover:border-primary-500/50 transition-all">
            <div class="flex justify-between items-start">
              <div class="flex-1">
                <div class="flex items-center gap-3 mb-2">
                  <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">{{ alert.title }}</h3>
                  <span class="px-2 py-1 rounded-full text-sm font-medium dark:text-white" [ngClass]="getSeverityClass(alert.severity)">
                    {{ ALERT_SEVERITY_LABELS[alert.severity] }}
                  </span>
                  <span class="px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-full text-sm">
                    {{ ALERT_STATUS_LABELS[alert.status] }}
                  </span>
                </div>
                <p class="text-gray-600 dark:text-gray-400 mb-2">{{ alert.description }}</p>
                <p class="text-sm text-gray-500 dark:text-gray-500">{{ formatDate(alert.created_at) }}</p>
              </div>
              <div class="flex gap-2 ml-4">
                @if (alert.status === AlertStatus.PENDING) {
                  <app-glass-button
                    variant="secondary"
                    size="sm"
                    (clicked)="acknowledgeAlert(alert)"
                    [disabled]="isLoading()"
                  >
                    รับทราบ
                  </app-glass-button>
                  <app-glass-button
                    variant="primary"
                    size="sm"
                    (clicked)="resolveAlert(alert)"
                    [disabled]="isLoading()"
                  >
                    แก้ไข
                  </app-glass-button>
                }
              </div>
            </div>
          </div>
        } @empty {
          <app-empty-state
            icon="⚠️"
            [title]="'common.emptyState.title' | translate"
            description="No alerts found. All systems are running smoothly."
          />
        }
      </div>
    }
  </app-glass-card>
</app-page-layout>

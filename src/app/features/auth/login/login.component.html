<section class="login-container">
  <!-- Language and Theme Toggle Controls -->
  <div class="login-controls">
    <div class="login-controls-group">
      <!-- Language Switcher -->
      <button
        type="button"
        class="control-button language-button"
        (click)="toggleLanguage()"
        [title]="currentLang === 'th' ? 'Switch to English' : '‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢'"
        aria-label="Change language">
        <span class="control-icon">{{ currentLang === 'th' ? 'üáπüá≠' : 'üá¨üáß' }}</span>
        <span class="control-text">{{ currentLang === 'th' ? '‡πÑ‡∏ó‡∏¢' : 'EN' }}</span>
      </button>

      <!-- Dark Mode Toggle -->
      <button
        type="button"
        class="control-button theme-button"
        (click)="toggleDarkMode()"
        [title]="isDarkMode ? 'Switch to Light Mode' : '‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î'"
        aria-label="Toggle dark mode">
        <svg *ngIf="!isDarkMode" class="control-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 3V1M12 23V21M5.314 5.314L3.9 3.9M20.1 20.1L18.686 18.686M3 12H1M23 12H21M5.314 18.686L3.9 20.1M20.1 3.9L18.686 5.314M18 12C18 15.314 15.314 18 12 18C8.686 18 6 15.314 6 12C6 8.686 8.686 6 12 6C15.314 6 18 8.686 18 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <svg *ngIf="isDarkMode" class="control-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="login-layout">
    <!-- Left Section - Promotional (40%) -->
    <div class="login-left-section">
      <!-- Animated Background Vectors -->
      <div class="login-vector-bg">
        <svg class="vector-shape vector-1" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <path d="M50,50 Q100,0 150,50 T250,50" stroke="rgba(255,255,255,0.1)" stroke-width="2" fill="none"/>
          <circle cx="100" cy="100" r="30" fill="rgba(255,255,255,0.05)"/>
          <path d="M30,170 Q100,120 170,170" stroke="rgba(255,255,255,0.08)" stroke-width="2" fill="none"/>
        </svg>
        <svg class="vector-shape vector-2" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <polygon points="100,20 180,80 140,180 60,180 20,80" fill="rgba(255,255,255,0.03)"/>
          <circle cx="100" cy="100" r="40" fill="rgba(255,255,255,0.04)"/>
        </svg>
        <svg class="vector-shape vector-3" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <path d="M20,100 Q50,50 100,50 T180,100" stroke="rgba(255,255,255,0.06)" stroke-width="2" fill="none"/>
          <circle cx="50" cy="150" r="25" fill="rgba(255,255,255,0.04)"/>
          <circle cx="150" cy="50" r="20" fill="rgba(255,255,255,0.05)"/>
        </svg>
      </div>

      <!-- Floating Particles -->
      <div class="particles">
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
        <div class="particle particle-4"></div>
        <div class="particle particle-5"></div>
      </div>

      <div class="login-left-content">
        <div class="login-left-pattern"></div>
        <div class="login-left-logo animated-logo">
          <img src="assets/images/logo/logo-myhr-light.png" alt="myHR Logo" class="login-left-logo-img" />
        </div>
        <div class="login-left-text animated-text">
          <h1 class="login-left-title">{{ 'auth.login.welcome' | translate }}</h1>
          <p class="login-left-subtitle">{{ 'auth.login.subtitle' | translate }}</p>
        </div>
      </div>
    </div>

    <!-- Right Section - Login Form (60%) -->
    <div class="login-right-section">
      <div class="login-right-content">
        <!-- Logo Section -->
        <div class="login-logo-section animated-logo-right">
          <div class="login-logo">
            <img src="assets/images/logo/logo-myhr-dark.png" alt="myHR Logo" class="login-logo-img" />
          </div>
        </div>

        <!-- Login Title -->
        <div class="login-title-section animated-title">
          <h2 class="login-title thai-text">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
          <p class="login-subtitle thai-text">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö HR</p>
        </div>

        <!-- Login Form -->
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
          <!-- Username Field -->
          <div class="form-field">
            <ejs-textbox
              class="e-bigger login-input"
              type="text"
              [placeholder]="'auth.login.username' | translate"
              floatLabelType="Never"
              [(value)]="username"
              (valueChange)="onUsernameChange($event)"
              (blur)="loginForm.get('username')?.markAsTouched()"
              aria-label="enter your username"
              role="textbox">
            </ejs-textbox>
            <div *ngIf="!username && loginForm.get('username')?.touched"
                 class="form-error thai-text">
              {{ 'auth.login.error.usernameRequired' | translate }}
            </div>
          </div>

          <!-- Password Field -->
          <div class="form-field">
            <ejs-textbox
              class="e-bigger login-input"
              type="password"
              [placeholder]="'auth.login.password' | translate"
              floatLabelType="Never"
              [(value)]="password"
              (valueChange)="onPasswordChange($event)"
              (keyup)="onPasswordKeyUp($event)"
              (blur)="loginForm.get('password')?.markAsTouched()"
              aria-label="enter your password"
              role="textbox">
            </ejs-textbox>
            <div *ngIf="!password && loginForm.get('password')?.touched"
                 class="form-error thai-text">
              {{ 'auth.login.error.passwordRequired' | translate }}
            </div>
          </div>

          <!-- Database Selection Field -->
          <div class="form-field" *ngIf="dbList.length > 0">
            <ejs-dropdownlist
              #dbDropdown
              [dataSource]="dbDataSource"
              [fields]="dbFields"
              [(value)]="dbSelected"
              (change)="onDbChange($event)"
              [placeholder]="'auth.login.selectDatabase' | translate"
              floatLabelType="Never"
              class="e-bigger login-input">
            </ejs-dropdownlist>
          </div>

          <!-- Remember Me & Forgot Password -->
          <div class="form-options">
            <ejs-checkbox
              cssClass="e-bigger login-checkbox"
              [label]="'auth.login.rememberMe' | translate"
              [(ngModel)]="rememberMe"
              [ngModelOptions]="{standalone: true}"
              aria-label="remember me"
              role="checkbox">
            </ejs-checkbox>
            <a
              href="javascript:void(0);"
              (click)="onForgotPassword()"
              class="forgot-password-link thai-text"
              aria-label="forgot password"
              role="link">
              {{ 'auth.login.forgotPassword' | translate }}
            </a>
          </div>

          <!-- Error Message -->
          <div *ngIf="errorMessage" class="error-message">
            <div class="error-message-content">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 5L5 15M5 5L15 15" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <p class="thai-text">{{ errorMessage }}</p>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="form-submit">
            <button
              ejs-button
              class="login-button e-primary"
              [content]="loading ? ('auth.login.signingIn' | translate) : ('auth.login.signIn' | translate)"
              type="submit"
              [disabled]="loading || !username || !password"
              aria-label="sign in"
              role="button">
            </button>
          </div>
        </form>

      </div>
    </div>
  </div>
</section>

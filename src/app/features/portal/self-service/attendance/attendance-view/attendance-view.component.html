<app-page-layout
  title="การลงเวลา"
  [breadcrumb]="[
    { label: 'Portal', link: '/portal' },
    { label: 'Self Service', link: '/portal/self-service' },
    { label: 'การลงเวลา', link: '/portal/self-service/attendance' }
  ]">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6">
    <!-- Statistics -->
    <app-statistics-grid [stats]="statisticsCards"></app-statistics-grid>

    <!-- Attendance Records -->
    <div class="space-y-4">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100">ประวัติการลงเวลา (7 วันล่าสุด)</h2>
      @if (isLoading) {
        <app-loading></app-loading>
      } @else {
        <app-glass-card>
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead>
                <tr class="border-b border-gray-200 dark:border-gray-700">
                  <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100">วันที่</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100">เวลาเข้า</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100">เวลาออก</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100">ชั่วโมงทำงาน</th>
                  <th class="px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100">สถานะ</th>
                </tr>
              </thead>
              <tbody>
                @for (record of attendanceRecords; track record.date) {
                  <tr class="border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50">
                    <td class="px-4 py-3 text-sm text-gray-900 dark:text-gray-100">
                      {{ record.date | date:'dd/MM/yyyy' }}
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                      {{ record.checkIn || '-' }}
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                      {{ record.checkOut || '-' }}
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                      {{ record.workingHours > 0 ? record.workingHours + ' ชม.' : '-' }}
                    </td>
                    <td class="px-4 py-3">
                      <span class="px-3 py-1 rounded-full text-xs font-medium {{ getStatusClass(record.status) }}">
                        {{ getStatusLabel(record.status) }}
                      </span>
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </app-glass-card>
      }
    </div>
  </div>
</app-page-layout>


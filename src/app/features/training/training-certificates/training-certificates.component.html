<div class="training-certificates-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Training Certificates</mat-card-title>
      <div class="header-controls">
        <mat-form-field appearance="outline">
          <mat-label>Year</mat-label>
          <mat-select [value]="selectedYear" (selectionChange)="onYearChange($event.value)">
            <mat-option *ngFor="let year of getYearOptions()" [value]="year">
              {{ year }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="loading; else certificatesContent" class="loading-container">
        <mat-spinner></mat-spinner>
      </div>

      <ng-template #certificatesContent>
        <div class="certificates-list" *ngIf="certificates.length > 0; else noCertificates">
          <div class="certificate-item" *ngFor="let certificate of certificates">
            <div class="certificate-header">
              <div class="certificate-info">
                <mat-icon>workspace_premium</mat-icon>
                <div>
                  <h4>{{ certificate.courseName }}</h4>
                  <span class="certificate-number" *ngIf="certificate.certificateNumber">
                    Certificate #{{ certificate.certificateNumber }}
                  </span>
                </div>
              </div>
              <div class="certificate-actions">
                <button mat-raised-button color="primary" (click)="downloadCertificate(certificate)" [disabled]="loading">
                  <mat-icon>download</mat-icon>
                  Download
                </button>
              </div>
            </div>
            <div class="certificate-details">
              <div class="detail-item">
                <span class="label">Issue Date:</span>
                <span>{{ certificate.issueDate | dateFormat:'long' }}</span>
              </div>
              <div class="detail-item" *ngIf="certificate.expiryDate">
                <span class="label">Expiry Date:</span>
                <span [class.expired]="isExpired(certificate)">
                  {{ certificate.expiryDate | dateFormat:'long' }}
                </span>
                <mat-chip *ngIf="isExpired(certificate)" color="warn">Expired</mat-chip>
              </div>
            </div>
          </div>
        </div>

        <ng-template #noCertificates>
          <div class="no-data">
            <mat-icon>workspace_premium</mat-icon>
            <p>No certificates found for {{ selectedYear }}</p>
          </div>
        </ng-template>
      </ng-template>
    </mat-card-content>
  </mat-card>
</div>


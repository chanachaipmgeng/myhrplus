<div class="training-details-container">
  <mat-card *ngIf="training">
    <mat-card-header>
      <mat-card-title>{{ training.courseName }}</mat-card-title>
      <mat-card-subtitle>{{ training.title }}</mat-card-subtitle>
      <div class="header-actions">
        <button mat-icon-button (click)="backToCatalog()" matTooltip="Back to Catalog">
          <mat-icon>arrow_back</mat-icon>
        </button>
      </div>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="loading; else detailsContent" class="loading-container">
        <mat-spinner></mat-spinner>
      </div>

      <ng-template #detailsContent>
        <div class="training-details">
          <div class="details-section">
            <h3>Training Information</h3>
            <div class="details-grid">
              <div class="detail-item">
                <mat-icon>calendar_today</mat-icon>
                <div class="detail-content">
                  <span class="label">Start Date</span>
                  <span class="value">{{ training.startDate | dateFormat:'long' }}</span>
                </div>
              </div>
              <div class="detail-item">
                <mat-icon>event</mat-icon>
                <div class="detail-content">
                  <span class="label">End Date</span>
                  <span class="value">{{ training.endDate | dateFormat:'long' }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="training.startTime">
                <mat-icon>schedule</mat-icon>
                <div class="detail-content">
                  <span class="label">Time</span>
                  <span class="value">{{ training.startTime }} - {{ training.endTime }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="training.location">
                <mat-icon>location_on</mat-icon>
                <div class="detail-content">
                  <span class="label">Location</span>
                  <span class="value">{{ training.location }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="training.room">
                <mat-icon>meeting_room</mat-icon>
                <div class="detail-content">
                  <span class="label">Room</span>
                  <span class="value">{{ training.room }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="training.instructor">
                <mat-icon>person</mat-icon>
                <div class="detail-content">
                  <span class="label">Instructor</span>
                  <span class="value">{{ training.instructor }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="training.hours">
                <mat-icon>access_time</mat-icon>
                <div class="detail-content">
                  <span class="label">Duration</span>
                  <span class="value">{{ training.hours }} hours</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="training.maxParticipants">
                <mat-icon>people</mat-icon>
                <div class="detail-content">
                  <span class="label">Participants</span>
                  <span class="value">{{ training.currentParticipants || 0 }} / {{ training.maxParticipants }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="training.cost">
                <mat-icon>attach_money</mat-icon>
                <div class="detail-content">
                  <span class="label">Cost</span>
                  <span class="value">{{ training.cost | number:'1.2-2' }} à¸¿</span>
                </div>
              </div>
            </div>
          </div>

          <div class="details-section" *ngIf="training.description">
            <h3>Description</h3>
            <p>{{ training.description }}</p>
          </div>

          <div class="details-section" *ngIf="training.registrationStartDate">
            <h3>Registration Period</h3>
            <div class="registration-period">
              <span>From: {{ training.registrationStartDate | dateFormat:'short' }}</span>
              <span>To: {{ training.registrationEndDate | dateFormat:'short' }}</span>
            </div>
          </div>
        </div>

        <div class="action-buttons">
          <button mat-button (click)="backToCatalog()">
            <mat-icon>arrow_back</mat-icon>
            Back to Catalog
          </button>
          <button 
            mat-raised-button 
            color="primary" 
            (click)="registerForTraining()"
            *ngIf="isRegistrationOpen() && !isRegistered"
            [disabled]="loading">
            <mat-icon>how_to_reg</mat-icon>
            Register for Training
          </button>
          <button 
            mat-raised-button 
            color="accent" 
            *ngIf="isRegistered"
            disabled>
            <mat-icon>check_circle</mat-icon>
            Already Registered
          </button>
        </div>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <div *ngIf="!training && !loading" class="no-data">
    <mat-icon>error</mat-icon>
    <p>Training not found</p>
    <button mat-button (click)="backToCatalog()">Back to Catalog</button>
  </div>
</div>


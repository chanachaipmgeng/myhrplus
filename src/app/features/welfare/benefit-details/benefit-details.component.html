<div class="benefit-details-container">
  <mat-card *ngIf="benefit">
    <mat-card-header>
      <mat-card-title>{{ benefit.benefitName }}</mat-card-title>
      <mat-card-subtitle>{{ benefit.benefitCode }}</mat-card-subtitle>
      <div class="header-actions">
        <button mat-icon-button (click)="backToBenefits()" matTooltip="Back to Benefits">
          <mat-icon>arrow_back</mat-icon>
        </button>
      </div>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="loading; else detailsContent" class="loading-container">
        <mat-spinner></mat-spinner>
      </div>

      <ng-template #detailsContent>
        <div class="benefit-details">
          <div class="details-section">
            <h3>Benefit Information</h3>
            <div class="details-grid">
              <div class="detail-item" *ngIf="benefit.category">
                <mat-icon>category</mat-icon>
                <div class="detail-content">
                  <span class="label">Category</span>
                  <span class="value">{{ benefit.category }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="benefit.type">
                <mat-icon>label</mat-icon>
                <div class="detail-content">
                  <span class="label">Type</span>
                  <span class="value">{{ benefit.type }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="benefit.cost">
                <mat-icon>attach_money</mat-icon>
                <div class="detail-content">
                  <span class="label">Cost</span>
                  <span class="value">{{ benefit.cost | number:'1.2-2' }} à¸¿</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="benefit.quantity">
                <mat-icon>inventory</mat-icon>
                <div class="detail-content">
                  <span class="label">Quantity</span>
                  <span class="value">{{ benefit.quantity }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="benefit.startDate">
                <mat-icon>calendar_today</mat-icon>
                <div class="detail-content">
                  <span class="label">Start Date</span>
                  <span class="value">{{ benefit.startDate | dateFormat:'long' }}</span>
                </div>
              </div>
              <div class="detail-item" *ngIf="benefit.endDate">
                <mat-icon>event</mat-icon>
                <div class="detail-content">
                  <span class="label">End Date</span>
                  <span class="value">{{ benefit.endDate | dateFormat:'long' }}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="details-section" *ngIf="benefit.description">
            <h3>Description</h3>
            <p>{{ benefit.description }}</p>
          </div>

          <div class="details-section" *ngIf="benefit.eligibility">
            <h3>Eligibility</h3>
            <p>{{ benefit.eligibility }}</p>
          </div>

          <div class="details-section" *ngIf="benefit.enrollmentStartDate">
            <h3>Enrollment Period</h3>
            <div class="enrollment-period">
              <span>From: {{ benefit.enrollmentStartDate | dateFormat:'short' }}</span>
              <span>To: {{ benefit.enrollmentEndDate | dateFormat:'short' }}</span>
            </div>
          </div>
        </div>

        <div class="action-buttons">
          <button mat-button (click)="backToBenefits()">
            <mat-icon>arrow_back</mat-icon>
            Back to Benefits
          </button>
          <button 
            mat-raised-button 
            color="primary" 
            (click)="enrollInBenefit()"
            *ngIf="isEnrollmentOpen() && !isEnrolled"
            [disabled]="loading">
            <mat-icon>how_to_reg</mat-icon>
            Enroll in Benefit
          </button>
          <button 
            mat-raised-button 
            color="accent" 
            *ngIf="isEnrolled"
            disabled>
            <mat-icon>check_circle</mat-icon>
            Already Enrolled
          </button>
        </div>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <div *ngIf="!benefit && !loading" class="no-data">
    <mat-icon>error</mat-icon>
    <p>Benefit not found</p>
    <button mat-button (click)="backToBenefits()">Back to Benefits</button>
  </div>
</div>


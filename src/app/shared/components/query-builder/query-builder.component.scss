/* ============================================
   Query Builder Component Styles
   ============================================ */

@import '../../../../styles/syncfusion-mixins';

:host {
  @apply block w-full;
}

/* Syncfusion Query Builder customization - Using ::ng-deep for third-party library styles */
:host ::ng-deep {
  .e-query-builder {
    @include syncfusion-glass-container;

    /* Rule Container */
    .e-rule-container {
      @apply bg-white/5 dark:bg-slate-900/10 border border-white/10 dark:border-slate-700/30 rounded-sm p-3 mb-2;

      /* Rule Fields */
      .e-rule-field {
        .e-dropdownlist {
          @include syncfusion-glass-dropdown;
        }
      }

      /* Rule Operator */
      .e-rule-operator {
        .e-dropdownlist {
          @include syncfusion-glass-dropdown;
        }
      }

      /* Rule Value */
      .e-rule-value {
        .e-input-group {
          input,
          .e-dropdownlist {
            @apply glass-weak dark:glass-dark-weak rounded-sm text-gray-700 dark:text-gray-300 transition-smooth focus:ring-2;
            &:focus {
              border-color: rgb(var(--primary-rgb));
              --tw-ring-color: rgba(var(--primary-rgb), 0.2);
            }
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);

            .dark & {
              background: rgba(15, 23, 42, 0.3);
              border-color: rgba(51, 65, 85, 0.3);
            }
          }
        }
      }

      /* Rule Buttons */
      .e-rule-delete,
      .e-rule-clone {
        @apply glass-weak dark:glass-dark-weak rounded-sm text-gray-700 dark:text-gray-300 min-w-[44px] min-h-[44px] md:min-w-0 md:min-h-0 transition-smooth focus:ring-2;
        &:hover {
          background-color: rgba(var(--primary-rgb), 0.1);
          border-color: rgba(var(--primary-rgb), 0.3);
          color: rgb(var(--primary-rgb));
        }
        &:focus {
          --tw-ring-color: rgba(var(--primary-rgb), 0.2);
        }
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);

        .dark & {
          background: rgba(15, 23, 42, 0.3);
          border-color: rgba(51, 65, 85, 0.3);
        }
      }
    }

    body.theme-gemini & .e-rule-container {
      background: rgba(var(--primary-rgb), 0.05);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(var(--primary-rgb), 0.2), 0 0 30px rgba(var(--primary-rgb), 0.1);
    }

    /* Group Container */
    .e-group-container {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      @apply rounded-sm p-3 mb-2;

      .dark & {
        background: rgba(15, 23, 42, 0.05);
        border-color: rgba(51, 65, 85, 0.2);
      }

      /* Group Condition */
      .e-group-condition {
        .e-dropdownlist {
          @apply glass-weak dark:glass-dark-weak rounded-sm text-gray-700 dark:text-gray-300 transition-smooth focus:ring-2;
          &:focus {
            border-color: rgb(var(--primary-rgb));
            --tw-ring-color: rgba(var(--primary-rgb), 0.2);
          }
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(255, 255, 255, 0.2);

          .dark & {
            background: rgba(15, 23, 42, 0.3);
            border-color: rgba(51, 65, 85, 0.3);
          }
        }
      }

      /* Group Buttons */
      .e-group-delete,
      .e-group-clone {
        @apply glass-weak dark:glass-dark-weak rounded-sm text-gray-700 dark:text-gray-300 min-w-[44px] min-h-[44px] md:min-w-0 md:min-h-0 transition-smooth;
        &:hover {
          background-color: rgba(var(--primary-rgb), 0.1);
          border-color: rgba(var(--primary-rgb), 0.3);
          color: rgb(var(--primary-rgb));
        }
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);

        .dark & {
          background: rgba(15, 23, 42, 0.3);
          border-color: rgba(51, 65, 85, 0.3);
        }
      }
    }

    body.theme-gemini & .e-group-container {
      background: rgba(147, 197, 253, 0.05);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(var(--primary-rgb), 0.2), 0 0 30px rgba(var(--primary-rgb), 0.1);
    }

    /* Buttons */
    .e-query-builder-button {
      @apply glass-weak dark:glass-dark-weak rounded-sm text-gray-700 dark:text-gray-300 px-4 py-2 min-w-[44px] min-h-[44px] md:min-w-0 md:min-h-0 transition-smooth focus:ring-2;
      &:hover {
        background: rgba(var(--primary-rgb), 0.1);
        border-color: rgba(var(--primary-rgb), 0.3);
        color: rgb(var(--primary-rgb));
      }
      .dark &:hover {
        background: rgba(var(--primary-rgb), 0.2);
      }
      &:focus {
        --tw-ring-color: rgba(var(--primary-rgb), 0.2);
      }
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);

      .dark & {
        background: rgba(15, 23, 42, 0.3);
        border-color: rgba(51, 65, 85, 0.3);
      }

      &.e-primary {
        background: rgb(var(--primary-rgb));
        border-color: rgb(var(--primary-rgb));
        color: white;
        &:hover {
          background: rgba(var(--primary-rgb), 0.9);
        }
      }
    }
  }
}

/* Responsive */
@media (max-width: 640px) {
  :host ::ng-deep .e-query-builder {
    .e-rule-container,
    .e-group-container {
      @apply p-2;
    }

    .e-rule-field .e-dropdownlist,
    .e-rule-operator .e-dropdownlist,
    .e-rule-value .e-input-group input,
    .e-rule-value .e-input-group .e-dropdownlist {
      @apply text-xs px-2 py-1;
    }
  }
}


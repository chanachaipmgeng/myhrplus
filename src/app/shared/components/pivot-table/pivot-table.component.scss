/* ============================================
   Pivot Table Component Styles
   ============================================ */

@import '../../../../styles/design-tokens';
@import '../../../../styles/mixins';

:host {
  display: block;
  width: 100%;
}

.pivot-table-container {
  width: 100%;
  @include glass-morphism('weak', 'light');
  border-radius: $radius-lg;
  padding: $spacing-4;
  overflow: hidden;
  
  .dark & {
    @include glass-morphism('weak', 'dark');
  }

  // Syncfusion PivotView Styles
  ::ng-deep {
    .e-pivotview {
      background: transparent;
      border: none;
      
      .e-pivotview-control-wrapper {
        background: transparent;
      }

      // Toolbar
      .e-toolbar {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: $radius-md;
        padding: $spacing-2;
        margin-bottom: $spacing-4;
        
        .dark & {
          background: rgba(15, 23, 42, 0.3);
          border-color: rgba(51, 65, 85, 0.3);
        }

        .e-toolbar-item {
          .e-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: $gray-700;
            transition: $transition-all;
            
            .dark & {
              background: rgba(15, 23, 42, 0.3);
              border-color: rgba(51, 65, 85, 0.3);
              color: $gray-300;
            }

            &:hover {
              background: rgba(var(--primary-rgb), 0.1);
              border-color: rgba(var(--primary-rgb), 0.3);
              color: rgb(var(--primary-rgb));
              
              .dark & {
                background: rgba(var(--primary-rgb), 0.2);
              }
            }

            &:focus {
              box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
            }
          }
        }
      }

      // Grouping Bar
      .e-grouping-bar {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: $radius-md;
        padding: $spacing-3;
        margin-bottom: $spacing-4;
        
        .dark & {
          background: rgba(15, 23, 42, 0.2);
          border-color: rgba(51, 65, 85, 0.2);
        }

        .e-grouping-bar-filters,
        .e-grouping-bar-rows,
        .e-grouping-bar-columns,
        .e-grouping-bar-values {
          .e-grouping-bar-item {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: $radius-sm;
            padding: $spacing-2 $spacing-3;
            margin: $spacing-1;
            transition: $transition-all;
            
            .dark & {
              background: rgba(15, 23, 42, 0.3);
              border-color: rgba(51, 65, 85, 0.3);
            }

            &:hover {
              background: rgba(var(--primary-rgb), 0.1);
              border-color: rgba(var(--primary-rgb), 0.3);
              
              .dark & {
                background: rgba(var(--primary-rgb), 0.2);
              }
            }
          }
        }
      }

      // Grid
      .e-grid {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: $radius-md;
        
        .dark & {
          border-color: rgba(51, 65, 85, 0.3);
        }

        .e-gridheader {
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(10px);
          
          .dark & {
            background: rgba(15, 23, 42, 0.3);
          }

          .e-headercell {
            background: transparent;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: $gray-700;
            font-weight: $font-weight-semibold;
            
            .dark & {
              border-bottom-color: rgba(51, 65, 85, 0.3);
              color: $gray-300;
            }
          }
        }

        .e-gridcontent {
          .e-row {
            background: transparent;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            
            .dark & {
              border-bottom-color: rgba(51, 65, 85, 0.1);
            }

            &:hover {
              background: rgba(var(--primary-rgb), 0.05);
              
              .dark & {
                background: rgba(var(--primary-rgb), 0.1);
              }
            }

            .e-rowcell {
              background: transparent;
              color: $gray-900;
              
              .dark & {
                color: $gray-100;
              }
            }
          }

          .e-summaryrow {
            background: rgba(255, 255, 255, 0.05);
            font-weight: $font-weight-semibold;
            
            .dark & {
              background: rgba(15, 23, 42, 0.2);
            }
          }
        }
      }
    }
  }
}

// Responsive
@include respond-to-down(sm) {
  .pivot-table-container {
    padding: $spacing-2;
    
    ::ng-deep {
      .e-pivotview {
        .e-toolbar {
          padding: $spacing-1;
          
          .e-toolbar-item {
            .e-btn {
              padding: $spacing-1 $spacing-2;
              font-size: $text-xs;
            }
          }
        }

        .e-grouping-bar {
          padding: $spacing-2;
          
          .e-grouping-bar-item {
            padding: $spacing-1 $spacing-2;
            font-size: $text-xs;
          }
        }
      }
    }
  }
}

// Gemini Theme
body.theme-gemini {
  .pivot-table-container {
    @include glass-gemini('weak');
    
    ::ng-deep {
      .e-pivotview {
        .e-toolbar {
          @include glass-gemini('default');
          @include gemini-border-glow();
        }

        .e-grouping-bar {
          @include glass-gemini('default');
        }

        .e-grid {
          @include glass-gemini('weak');
        }
      }
    }
  }
}


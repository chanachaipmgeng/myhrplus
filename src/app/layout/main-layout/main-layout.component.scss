/* ============================================
   Main Layout Component Styles
   Modern, Responsive, Animated Layout
   ============================================ */

   @import '../../../styles/mixins';

   /* Layout Background Pattern */
   .layout-background {
     @apply bg-slate-50 dark:bg-slate-900;
     position: relative;

     /* Animated gradient overlay */
     &::before {
       content: '';
       position: absolute;
       inset: 0;
       background:
         radial-gradient(circle at 20% 30%, rgba(var(--primary-rgb), 0.1) 0%, transparent 50%),
         radial-gradient(circle at 80% 70%, rgba(var(--primary-rgb), 0.1) 0%, transparent 50%);
       opacity: 0.4;
       animation: gradientShift 8s ease-in-out infinite;
       pointer-events: none;
       z-index: 0;
     }

     /* Pattern overlay */
     &::after {
       content: '';
       position: absolute;
       inset: 0;
       background-image:
         repeating-linear-gradient(
           0deg,
           transparent,
           transparent 2px,
           rgba(var(--primary-rgb), 0.03) 2px,
           rgba(var(--primary-rgb), 0.03) 4px
         );
       opacity: 0.5;
       animation: patternShimmer 20s linear infinite;
       pointer-events: none;
       z-index: 1;
     }

     /* Dark mode adjustments */
     .dark &::before,
     .dark &::after {
       opacity: 0.2;
     }

     /* Gemini theme adjustments */
     [data-theme='gemini'] &::before,
     [class*='theme-gemini'] &::before {
       background:
         radial-gradient(circle at 20% 30%, rgba(var(--primary-rgb), 0.15) 0%, transparent 50%),
         radial-gradient(circle at 80% 70%, rgba(var(--primary-rgb), 0.15) 0%, transparent 50%);
       opacity: 0.6;
     }

     [data-theme='gemini'] &::after,
     [class*='theme-gemini'] &::after {
       background-image:
         repeating-linear-gradient(
           0deg,
           transparent,
           transparent 2px,
           rgba(var(--primary-rgb), 0.05) 2px,
           rgba(var(--primary-rgb), 0.05) 4px
         );
       opacity: 0.7;
     }
   }

   /* Content Area */
   .content-area {
     /* Smooth scroll */
     scroll-behavior: smooth;

    /* Header offset - when header is visible */
    &.content-area-with-header {
      margin-top: var(--header-height-md); /* Fixed header height offset - Desktop */

      @include respond-to-down('md') {
        margin-top: var(--header-height); /* Fixed header height offset - Mobile */
      }
    }


     /* Custom scrollbar */
     &::-webkit-scrollbar {
       width: 8px;
     }

     &::-webkit-scrollbar-track {
       background: var(--glass-bg-weak);
       border-radius: 4px;
     }

     &::-webkit-scrollbar-thumb {
       background: rgba(var(--primary-rgb), 0.3);
       border-radius: 4px;
       transition: background 0.3s ease;

       &:hover {
         background: rgba(var(--primary-rgb), 0.5);
       }
     }

     /* Dark mode scrollbar */
     .dark &::-webkit-scrollbar-track,
     [data-theme='dark'] &::-webkit-scrollbar-track {
       background: var(--glass-bg-weak);
     }

     .dark &::-webkit-scrollbar-thumb,
     [data-theme='dark'] &::-webkit-scrollbar-thumb {
       background: rgba(var(--primary-rgb), 0.4);

       &:hover {
         background: rgba(var(--primary-rgb), 0.6);
       }
     }
   }

   /* Syncfusion Sidebar Enhancements */
   ::ng-deep {
     .modern-sidebar {
       &.e-sidebar {
         /* Z-index to ensure sidebar is above footer */
         z-index: 1000;

         /* Smooth transitions */
         transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                     opacity 0.3s ease-in-out,
                     box-shadow 0.3s ease-in-out;

         /* Enhanced shadow */
         box-shadow:
           0 10px 40px rgba(0, 0, 0, 0.1),
           0 0 0 1px rgba(var(--primary-rgb), 0.1);

         /* Backdrop blur - subtle effect, let sidebar component handle background */
         -webkit-backdrop-filter: blur(20px);
         backdrop-filter: blur(20px);

         /* Transparent background - let sidebar component handle its own background */
         background: transparent !important;

         /* Full height sidebar - always full screen height */
         top: 0 !important;
         height: 100vh !important;

         /* Dark mode - Enhanced shadow only */
         .dark &,
         [data-theme='dark'] & {
           box-shadow:
             0 10px 40px rgba(0, 0, 0, 0.3),
             0 0 0 1px rgba(var(--primary-rgb), 0.2);
         }

         /* Gemini theme - Enhanced shadow only */
         [data-theme='gemini'] &,
         [class*='theme-gemini'] & {
           box-shadow:
             0 10px 40px rgba(0, 0, 0, 0.5),
             0 0 0 1px rgba(var(--primary-rgb), 0.3),
             0 0 60px rgba(var(--primary-rgb), 0.1);
         }
       }

       /* Overlay */
       &.e-sidebar-overlay {
         background: var(--glass-bg-strong);
         -webkit-backdrop-filter: blur(4px);
         backdrop-filter: blur(4px);
         transition: opacity 0.3s ease-in-out;
       }
     }
   }

   /* Route Container */
   .route-container {
     position: relative;
     width: 100%;
     min-height: 1px; /* Ensure container has height for absolute positioning */
     overflow: hidden; /* Prevent content overflow during animation */

     > div {
       position: relative;
       width: 100%;
       min-height: 1px;
     }

     /* Ensure router outlet content is properly positioned */
     ::ng-deep router-outlet + * {
       display: block;
       width: 100%;
     }
   }

   /* Animations */
   @keyframes gradientShift {
     0%, 100% {
       background-position: 0% 50%;
     }
     50% {
       background-position: 100% 50%;
     }
   }

   @keyframes patternShimmer {
     0% {
       background-position: 0 0;
     }
     100% {
       background-position: 0 100px;
     }
   }

   /* Responsive Design */
   @include respond-to-down('md') {
     .layout-background {
       &::before,
       &::after {
         opacity: 0.3;
         /* Reduce animation intensity on mobile */
         animation-duration: 12s;
       }
     }

     .content-area {
       /* Reduce padding on mobile */
       padding: 1rem;
     }
   }

   /* Reduced Motion Support */
   @media (prefers-reduced-motion: reduce) {
     .layout-background {
       &::before,
       &::after {
         animation: none;
       }
     }

     .content-area {
       scroll-behavior: auto;
     }

     ::ng-deep {
       .modern-sidebar {
         &.e-sidebar {
           transition: none;
         }
       }
     }
   }

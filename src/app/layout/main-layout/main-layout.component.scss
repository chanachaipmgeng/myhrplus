/* ============================================
   Main Layout Component Styles
   Modern, Responsive, Animated Layout
   ============================================ */

   @import '../../../styles/mixins';

   /* Layout Background Pattern */
   .layout-background {
     /* Background - Using CSS Variables */
     background: linear-gradient(
       to bottom,
       var(--main-layout-bg-start, rgba(255, 255, 255, 0.98)),
       var(--main-layout-bg-end, rgba(255, 255, 255, 0.95))
     );
     position: relative;

     /* Animated gradient overlay */
     &::before {
       content: '';
       position: absolute;
       inset: 0;
       background:
         radial-gradient(circle at 20% 30%, rgba(var(--primary-rgb), 0.1) 0%, transparent 50%),
         radial-gradient(circle at 80% 70%, rgba(var(--primary-rgb), 0.1) 0%, transparent 50%);
       opacity: 0.4;
       animation: gradientShift 8s ease-in-out infinite;
       pointer-events: none;
       z-index: 0;
     }

     /* Pattern overlay */
     &::after {
       content: '';
       position: absolute;
       inset: 0;
       background-image:
         repeating-linear-gradient(
           0deg,
           transparent,
           transparent 2px,
           rgba(var(--primary-rgb), 0.03) 2px,
           rgba(var(--primary-rgb), 0.03) 4px
         );
       opacity: 0.5;
       animation: patternShimmer 20s linear infinite;
       pointer-events: none;
       z-index: 1;
     }

     /* Dark mode adjustments */
     .dark &::before,
     .dark &::after {
       opacity: 0.2;
     }

     /* Myhr theme adjustments */
    [data-theme='myhr'] &::before,
    [class*='theme-myhr'] &::before {
       background:
         radial-gradient(circle at 20% 30%, rgba(var(--primary-rgb), 0.15) 0%, transparent 50%),
         radial-gradient(circle at 80% 70%, rgba(var(--primary-rgb), 0.15) 0%, transparent 50%);
       opacity: 0.6;
     }

    [data-theme='myhr'] &::after,
    [class*='theme-myhr'] &::after {
       background-image:
         repeating-linear-gradient(
           0deg,
           transparent,
           transparent 2px,
           rgba(var(--primary-rgb), 0.05) 2px,
           rgba(var(--primary-rgb), 0.05) 4px
         );
       opacity: 0.7;
     }
   }

   /* Main Wrapper */
   .main-wrapper {
     position: relative;
     z-index: 1;
   }

   /* Sticky Header Wrapper */
   .sticky-header-wrapper {
     position: sticky;
     top: 0;
     z-index: 50;
     background: transparent;
   }

   /* Main Content Wrapper - Scrollable */
   .main-content-wrapper {
     position: relative;
     scroll-behavior: smooth;
     overflow-y: auto;
     overflow-x: hidden;

     /* Custom scrollbar using mixin */
     @include custom-scrollbar-primary(8px, 0.2);
   }

   /* Content Container */
   .content-container {
     position: relative;
     min-height: calc(100vh - var(--header-height-md) - var(--footer-height-md));
     display: flex;
     flex-direction: column;

     @include respond-to-down('md') {
       min-height: calc(100vh - var(--header-height) - var(--footer-height));
     }
   }

   /* Breadcrumb Section */
   .breadcrumb-section {
     position: relative;
     z-index: 1;
     background: linear-gradient(
       to bottom,
       rgba(255, 255, 255, 0.08) 0%,
       rgba(255, 255, 255, 0.03) 50%,
       transparent 100%
     );
     @include backdrop-blur(8px);
     border-bottom: 1px solid rgba(var(--primary-rgb), 0.1);
     transition: all 0.3s ease;

     .dark &,
     [data-theme='dark'] & {
       background: linear-gradient(
         to bottom,
         rgba(0, 0, 0, 0.15) 0%,
         rgba(0, 0, 0, 0.05) 50%,
         transparent 100%
       );
       border-bottom-color: rgba(var(--primary-rgb), 0.15);
     }

    [data-theme='myhr'] &,
    [class*='theme-myhr'] & {
       background: linear-gradient(
         to bottom,
         rgba(0, 0, 0, 0.2) 0%,
         rgba(0, 0, 0, 0.1) 50%,
         transparent 100%
       );
       border-bottom-color: rgba(var(--primary-rgb), 0.2);
     }
   }

   /* Route Content Wrapper */
   .route-content-wrapper {
     position: relative;
     flex: 1;
     z-index: 1;
     animation: fadeInUp 0.4s ease-out;

     @keyframes fadeInUp {
       from {
         opacity: 0;
         transform: translateY(10px);
       }
       to {
         opacity: 1;
         transform: translateY(0);
       }
     }
   }

   /* Sticky Footer Wrapper */
   .sticky-footer-wrapper {
     position: sticky;
     bottom: 0;
     z-index: 40;
     background: linear-gradient(
       to top,
       rgba(255, 255, 255, 0.05) 0%,
       transparent 100%
     );
     @include backdrop-blur(4px);
     margin-top: auto;
     transition: all 0.3s ease;

     .dark &,
     [data-theme='dark'] & {
       background: linear-gradient(
         to top,
         rgba(0, 0, 0, 0.1) 0%,
         transparent 100%
       );
     }

    [data-theme='myhr'] &,
    [class*='theme-myhr'] & {
       background: linear-gradient(
         to top,
         rgba(0, 0, 0, 0.15) 0%,
         transparent 100%
       );
     }
   }

   /* Syncfusion Sidebar Enhancements */
   ::ng-deep {
     .modern-sidebar {
       &.e-sidebar {
         /* Z-index to ensure sidebar is above footer */
         z-index: 1000;

         /* Smooth transitions */
         transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                     opacity 0.3s ease-in-out,
                     box-shadow 0.3s ease-in-out;

         /* Enhanced shadow */
         box-shadow:
           0 10px 40px rgba(0, 0, 0, 0.1),
           0 0 0 1px rgba(var(--primary-rgb), 0.1);

         /* Backdrop blur - subtle effect, let sidebar component handle background */
         @include backdrop-blur(20px);

         /* Transparent background - let sidebar component handle its own background */
         background: transparent !important;

         /* Full height sidebar - always full screen height */
         top: 0 !important;
         height: 100vh !important;

         /* Dark mode - Enhanced shadow only */
         .dark &,
         [data-theme='dark'] & {
           box-shadow:
             0 10px 40px rgba(0, 0, 0, 0.3),
             0 0 0 1px rgba(var(--primary-rgb), 0.2);
         }

         /* Myhr theme - Enhanced shadow only */
    [data-theme='myhr'] &,
    [class*='theme-myhr'] & {
           box-shadow:
             0 10px 40px rgba(0, 0, 0, 0.5),
             0 0 0 1px rgba(var(--primary-rgb), 0.3),
             0 0 60px rgba(var(--primary-rgb), 0.1);
         }
       }

       /* Overlay */
       &.e-sidebar-overlay {
         background: var(--glass-bg-strong);
         @include backdrop-blur(4px);
         transition: opacity 0.3s ease-in-out;
       }
     }
   }

   /* Route Container */
   .route-container {
     position: relative;
     width: 100%;
     min-height: 1px; /* Ensure container has height for absolute positioning */
     overflow: hidden; /* Prevent content overflow during animation */

     > div {
       position: relative;
       width: 100%;
       min-height: 1px;
     }

     /* Ensure router outlet content is properly positioned */
     ::ng-deep router-outlet + * {
       display: block;
       width: 100%;
     }
   }

   /* Animations */
   @keyframes gradientShift {
     0%, 100% {
       background-position: 0% 50%;
     }
     50% {
       background-position: 100% 50%;
     }
   }

   /* patternShimmer animation moved to styles.scss */

   /* Responsive Design */
   @include respond-to-down('md') {
     .layout-background {
       &::before,
       &::after {
         opacity: 0.3;
         /* Reduce animation intensity on mobile */
         animation-duration: 12s;
       }
     }
   }

   /* Reduced Motion Support */
   @media (prefers-reduced-motion: reduce) {
     .layout-background {
       &::before,
       &::after {
         animation: none;
       }
     }

     .route-content-wrapper {
       animation: none;
     }

     ::ng-deep {
       .modern-sidebar {
         &.e-sidebar {
           transition: none;
         }
       }
     }
   }
